(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3e8f5b83"],{"1c66":function(a,t,e){},c06e:function(a,t,e){"use strict";e.r(t);var s=function(){var a=this,t=a._self._c;return t("div",{staticClass:"page1"},[t("Row",{staticClass:"listTop",attrs:{gutter:8}},[t("Col",{attrs:{span:"7"}},[t("div",{staticClass:"panel leftTop"},[t("div",{staticClass:"panel-header"},[t("div",{staticClass:"title-text"},[a._v("职位差异度分析")])]),t("div",{staticClass:"left1"},[t("salaryTrend",{ref:"chart1",attrs:{data:a.salaryTrendData}})],1),t("div",{staticClass:"left2"},[t("chart2",{ref:"chart2",attrs:{data:a.industryData}}),t("div",{staticStyle:{width:"40%",float:"left",height:"100%"}},[t("pie",{ref:"chart3",attrs:{id:"left_2_2",data:a.salaryData}})],1)],1),t("div",{staticClass:"left3"},[t("chart2",{ref:"chart4",attrs:{data:a.experienceData}}),t("div",{staticStyle:{width:"40%",float:"left",height:"100%"}},[t("pie",{ref:"chart5",attrs:{id:"left_3_2",data:a.educationData}})],1)],1)])]),t("Col",{attrs:{span:"10"}},[t("jobProfileCenter",{ref:"chart6",attrs:{profiles:a.jobProfiles}})],1),t("Col",{attrs:{span:"7"}},[t("div",{staticClass:"panel rightTop-1"},[t("div",{staticClass:"panel-header"},[t("div",{staticClass:"title-text"},[a._v("职位画像综合分析")])]),t("jobProfileDetails",{ref:"chart17",attrs:{data:a.jobProfileDetailsData}})],1),t("div",{staticClass:"panel rightTop-2"},[t("div",{staticClass:"panel-header"},[t("div",{staticClass:"title-text"},[a._v("职位特征分析")])]),t("div",{staticClass:"rightTop-list"},[t("div",{staticClass:"list"},[t("jobRadar",{ref:"chart8",attrs:{data:a.jobDifferenceData}})],1),t("div",{staticClass:"list"},[t("chart4",{ref:"chart9",attrs:{data:a.salaryRangeData}})],1),t("div",{staticClass:"list"},[t("chart4",{ref:"chart10",attrs:{data:a.companyTypeData}})],1)])])])],1),t("Row",{staticClass:"listBottom",attrs:{gutter:8}},[t("Col",{attrs:{span:"9"}},[t("div",{staticClass:"panel content"},[t("div",{staticClass:"panel-header"},[t("div",{staticClass:"title-text"},[a._v("薪资详细分析")])]),t("div",{staticClass:"chart-content"},[t("Row",{staticClass:"topLine"},[t("Col",{attrs:{span:"24"}},[t("salaryBox",{ref:"chart11",attrs:{data:a.salaryBoxData}})],1)],1),t("Row",{staticClass:"bottomPie"},[t("Col",{attrs:{span:"12"}},[t("chart6",{ref:"chart12",attrs:{data:a.salaryDetail1}})],1),t("Col",{attrs:{span:"12"}},[t("chart6",{ref:"chart13",attrs:{data:a.salaryDetail2}})],1)],1)],1)])]),t("Col",{attrs:{span:"4"}},[t("div",{staticClass:"panel content"},[t("div",{staticClass:"panel-header"},[t("div",{staticClass:"title-text"},[a._v("职位聚类分析")])]),t("div",{staticClass:"behavior"},[t("jobClustering",{ref:"chart14",attrs:{data:a.jobClusterData}})],1)])]),t("Col",{attrs:{span:"4"}},[t("div",{staticClass:"panel content"},[t("div",{staticClass:"panel-header"},[t("div",{staticClass:"title-text"},[a._v("职位需求分析")])]),t("jobFunnel",{ref:"chart16",attrs:{data:a.jobDemandData}})],1)]),t("Col",{attrs:{span:"7"}},[t("div",{staticClass:"panel content"},[t("div",{staticClass:"panel-header"},[t("div",{staticClass:"title-text"},[a._v("城市分布分析")])]),t("div",{staticClass:"appUse"},[t("cityBar",{ref:"chart7",attrs:{data:a.cityData}})],1)])])],1),a.isLoading?t("div",{staticClass:"data-loading"},[t("div",{staticClass:"loading-spinner"}),t("p",[a._v("数据加载中...")])]):a._e(),a.dataError&&!a.isLoading?t("div",{staticClass:"data-error"},[t("div",{staticClass:"error-icon"},[a._v("!")]),t("p",[a._v(a._s(a.dataError))]),t("button",{staticClass:"retry-button",on:{click:a.loadJobData}},[a._v("重试")])]):a._e()],1)},l=[],r=(e("9a8e"),e("25c1"),e("71d5"),e("6d95"),e("a6b6"),e("10ab"),e("6823"),e("79c4"),e("ffd4"));const i=()=>e.e("chunk-89810512").then(e.bind(null,"67d2")),n=()=>e.e("chunk-7b64cccf").then(e.bind(null,"26f2")),o=()=>e.e("chunk-0d63a1f7").then(e.bind(null,"ced0")),c=()=>e.e("chunk-1ddfb2c2").then(e.bind(null,"f5a5")),h=()=>e.e("chunk-12d3c530").then(e.bind(null,"f497")),d=()=>e.e("chunk-a4dff504").then(e.bind(null,"4741")),u=()=>e.e("chunk-fc7e061e").then(e.bind(null,"19d3")),f=()=>e.e("chunk-f4b4f150").then(e.bind(null,"c7b7")),y=()=>e.e("chunk-69b7b7e7").then(e.bind(null,"31d9")),v=()=>e.e("chunk-f1890582").then(e.bind(null,"0367")),m=()=>e.e("chunk-2671678e").then(e.bind(null,"a5c8")),D=()=>e.e("chunk-0670a06d").then(e.bind(null,"f9f4"));var b={name:"page1",props:{selectRangeDate:Array},components:{chart2:i,chart4:n,chart6:o,pie:c,cityBar:h,salaryTrend:d,jobProfileCenter:u,jobRadar:f,salaryBox:y,jobFunnel:v,jobProfileDetails:m,jobClustering:D},data(){return{salaryTrendData:{},industryData:{},salaryData:{},experienceData:{},educationData:{},cityData:{},jobProfiles:[],jobDifferenceData:{},salaryRangeData:{},companyTypeData:{},salaryBoxData:{},salaryDetail1:{},salaryDetail2:{},hotJobsData:[],jobClusterData:{},jobDemandData:[],jobProfileDetailsData:{},isLoading:!1,dataError:null,resizeFn:null}},methods:{async loadJobData(){this.isLoading=!0,this.dataError=null;try{console.log("开始加载职位数据...");const a=await Object(r["a"])();if(!a)throw new Error("数据处理返回空结果");console.log("数据处理完成，准备更新界面"),this.formatDataForCharts(a)}catch(a){console.error("数据加载或处理失败:",a),this.dataError=a.message||"数据加载失败"}finally{this.isLoading=!1,this.$nextTick(()=>{this.refreshCharts()})}},formatDataForCharts(a){const{industryAnalysis:t,salaryAnalysis:e,experienceAnalysis:s,educationAnalysis:l,cityAnalysis:r,jobProfiles:i,jobDifferenceData:n,jobSalaryComparisonData:o,salaryDetailData:c}=a;this.industryData={name:"行业类别TOP5",number:t.length+"个",data:t.slice(0,5).map(a=>a.name),color:"192,35,42",value:t.slice(0,5).map(a=>a.value)},this.companyTypeData={title:"主要行业类别",data:t.slice(0,6).map((a,t)=>({value:a.value,name:a.name,itemStyle:{color:["#a262f2","#2ca8fe","#feac2c","#c0232a","#2cd9fe","#252448"][t]}}))};const h={"5K以下":0,"5-10K":0,"10-15K":0,"15-20K":0,"20-30K":0,"30K以上":0};e.forEach(a=>{"0-5K"===a.name?h["5K以下"]=a.value:"5-10K"===a.name?h["5-10K"]=a.value:"10-15K"===a.name?h["10-15K"]=a.value:"15-20K"===a.name?h["15-20K"]=a.value:"20K+"===a.name&&(h["20-30K"]=Math.round(.7*a.value),h["30K以上"]=Math.round(.3*a.value))}),this.salaryData={title:"薪资分布",color:"#BE232A",data:Object.entries(h).map(([a,t],e)=>({value:t,name:a,itemStyle:{color:["#a262f2","#2ca8fe","#feac2c","#c0232a","#2cd9fe","#fe672c"][e]}}))},this.salaryTrendData={ranges:Object.keys(h),values:Object.values(h)},this.salaryRangeData={title:"薪资范围分析",data:Object.entries(h).map(([a,t],e)=>({value:t,name:a,itemStyle:{color:["#252448","#2ca8fe","#feed2c","#2871ea","#fe672c","#a262f2"][e]}}))},this.experienceData={name:"经验要求TOP5",number:s.length+"种",data:s.slice(0,5).map(a=>a.name),color:"40,112,232",value:s.slice(0,5).map(a=>a.value)},this.educationData={title:"学历要求分布",color:"#2C7BFE",data:l.slice(0,6).map((a,t)=>({value:a.value,name:a.name,itemStyle:{color:["#a262f2","#2ca8fe","#feac2c","#c0232a","#2cd9fe","#252448"][t]}}))},this.cityData={name:"城市分布TOP10",number:r.length+"个",data:r.slice(0,10).map(a=>a.name),color:"44,168,254",value:r.slice(0,10).map(a=>a.value)},this.jobProfiles=i,this.jobDifferenceData=n||this.calculateJobDifferenceFromData(a),this.jobClusterData={},this.jobDemandData=this.analyzeJobDemandFromData(a);const d=this.getTotalJobsCount(a);let u="0.0";if(e&&e.length>0){let a=0,t=0;e.forEach(e=>{const s=this.estimateSalaryValue(e.name);a+=s*e.value,t+=e.value}),u=t>0?(a/t).toFixed(1):"0.0"}this.jobProfileDetailsData={profiles:i.slice(0,5),totalJobs:d,avgSalary:u+"K",topIndustries:t.slice(0,5),topCities:r.slice(0,5)},this.salaryBoxData={jobProfiles:i,average:u},c?(this.salaryDetail1=c.highSalaryDetail,this.salaryDetail2=c.lowSalaryDetail):this.generateSalaryDetailsFromData(a)},estimateSalaryValue(a){switch(a){case"0-5K":return 3;case"5-10K":return 7.5;case"10-15K":return 12.5;case"15-20K":return 17.5;case"20K+":return 25;default:return 0}},calculateJobDifferenceFromData(a){const t=["薪资差异","经验差异","学历差异","行业差异","地域差异"],e=this.calculateDiversity(a.salaryAnalysis),s=this.calculateDiversity(a.experienceAnalysis),l=this.calculateDiversity(a.educationAnalysis),r=this.calculateDiversity(a.industryAnalysis),i=this.calculateDiversity(a.cityAnalysis);return{dimensions:t,scores:[e,s,l,r,i]}},calculateDiversity(a){if(!a||!a.length)return 50;const t=a.reduce((a,t)=>a+t.value,0);if(0===t)return 50;const e=a.map(a=>a.value/t),s=e.reduce((a,t)=>0===t?a:a-t*Math.log(t),0),l=Math.log(a.length),r=l>0?s/l*100:50;return Math.min(100,Math.max(40,r))},analyzeJobDemandFromData(a){const t=this.getTotalJobsCount(a),e=this.countHighSalaryJobs(a.salaryAnalysis),s=Math.round(.7*t),l=Math.round(.4*t),r=Math.round(.2*t);return[{name:"总职位数",value:t},{name:"高薪职位",value:e},{name:"热门职位",value:s},{name:"紧缺职位",value:l},{name:"优质职位",value:r}]},getTotalJobsCount(a){return a.industryAnalysis.reduce((a,t)=>a+t.value,0)},countHighSalaryJobs(a){return a.filter(a=>"15-20K"===a.name||"20K+"===a.name).reduce((a,t)=>a+t.value,0)},generateSalaryDetailsFromData(a){const t=this.getTotalJobsCount(a),e=this.countHighSalaryJobs(a.salaryAnalysis),s=a.salaryAnalysis.filter(a=>"0-5K"===a.name||"5-10K"===a.name&&a.value>0).reduce((a,t)=>"5-10K"===t.name?a+Math.round(.6*t.value):a+t.value,0);this.salaryDetail1={title:"高薪职位分布",data:[{value:e,name:"高薪职位",itemStyle:{color:"#c0232a"}},{value:t-e,name:"其他职位",itemStyle:{color:"#2870e8"}}],data1:[{value:Math.floor(.4*e),name:"30K以上",itemStyle:{color:"#c0232a"}},{value:Math.floor(.3*e),name:"20-30K",itemStyle:{color:"#2870e8"}},{value:Math.floor(.2*e),name:"15-20K",itemStyle:{color:"#feed2c"}},{value:Math.floor(.1*e),name:"其他",itemStyle:{color:"#a262f2"}}]},this.salaryDetail2={title:"低薪职位分布",data:[{value:s,name:"低薪职位",itemStyle:{color:"#c0232a"}},{value:t-s,name:"其他职位",itemStyle:{color:"#2870e8"}}],data1:[{value:Math.floor(.4*s),name:"5K以下",itemStyle:{color:"#c2232a"}},{value:Math.floor(.3*s),name:"5-8K",itemStyle:{color:"#fe672c"}},{value:Math.floor(.2*s),name:"8-10K",itemStyle:{color:"#a262f2"}},{value:Math.floor(.1*s),name:"其他",itemStyle:{color:"#2870e8"}}]}},refreshCharts(){for(let a=1;a<=17;a++)this.$refs["chart"+a]&&this.$refs["chart"+a].setChart&&this.$refs["chart"+a].setChart()},generateJobSalaryBoxplotData(a){if(!a||!a.length)return null;const t=[...a].sort((a,t)=>t.count-a.count),e=t.slice(0,5),s=e.map(a=>a.title),l=e.map(a=>this.calculateSalaryBoxplot(a.salaries));return{jobTitles:s,boxplotData:l}},calculateSalaryBoxplot(a){if(!a||!a.length)return[0,0,0,0,0];const t=[];if(a.forEach(a=>{const e=String(a),s=e.match(/(\d+)(?:k|K)?(?:\s*[-~]\s*)(\d+)?(?:k|K)?/i);if(s){const a=parseInt(s[1]),e=s[2]?parseInt(s[2]):a;t.push((a+e)/2)}}),0===t.length)return[0,0,0,0,0];t.sort((a,t)=>a-t);const e=t.length,s=t[0],l=t[e-1],r=Math.floor(.25*e),i=Math.floor(.5*e),n=Math.floor(.75*e),o=e>1?t[r]:s,c=e>1?t[i]:s,h=e>1?t[n]:l;return[s,o,c,h,l]}},mounted(){this.loadJobData().catch(a=>{console.error("加载数据失败:",a)}),this.resizeFn=this.$debounce(()=>{try{for(let a=1;a<=17;a++)this.$refs["chart"+a]&&this.$refs["chart"+a].setChart&&this.$refs["chart"+a].setChart()}catch(a){console.error("图表刷新出错:",a)}},300),window.addEventListener("resize",this.resizeFn)},beforeDestroy(){window.removeEventListener("resize",this.resizeFn)}},p=b,C=(e("d16e"),e("1805")),g=Object(C["a"])(p,s,l,!1,null,"dc1f3e72",null);t["default"]=g.exports},d16e:function(a,t,e){"use strict";e("1c66")}}]);
//# sourceMappingURL=chunk-3e8f5b83.f2c70bb0.js.map