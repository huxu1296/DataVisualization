(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2671678e"],{"8f37":function(t,s,a){},"9e4a":function(t,s,a){"use strict";a("8f37")},a5c8:function(t,s,a){"use strict";a.r(s);var e=function(){var t=this,s=t._self._c;return s("div",{staticClass:"job-profile-details"},[t._e(),s("div",{staticClass:"stats-panel"},[s("div",{staticClass:"stat-item"},[s("div",{key:t.statKey,staticClass:"stat-value"},[t._v(t._s(t.totalJobsDisplay))]),s("div",{staticClass:"stat-label"},[t._v("总职位数")])]),s("div",{staticClass:"stat-item"},[s("div",{key:t.statKey+"_salary",staticClass:"stat-value"},[t._v(t._s(t.avgSalaryDisplay))]),s("div",{staticClass:"stat-label"},[t._v("平均薪资")])])]),s("div",{staticClass:"profile-summary"},[s("div",{staticClass:"summary-title"},[t._v("热门职位排名")]),s("div",{staticClass:"job-list",attrs:{id:"job-list-scroll"}},[t.hasData?t._l(t.profiles,(function(a,e){return s("div",{key:e,staticClass:"job-item",class:{"active-job":t.activeJobIndex===e},on:{mouseenter:function(s){t.activeJobIndex=e},mouseleave:function(s){t.activeJobIndex=-1}}},[s("span",{staticClass:"job-rank",style:{background:t.getRankColor(e)}},[t._v(t._s(e+1))]),s("div",{staticClass:"job-info"},[s("span",{staticClass:"job-title",attrs:{title:a.title}},[t._v(t._s(a.title))]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.activeJobIndex===e,expression:"activeJobIndex === index"}],staticClass:"job-details"},[s("div",{staticClass:"detail-row"},[s("span",{staticClass:"detail-label"},[t._v("平均薪资:")]),s("span",{staticClass:"detail-value"},[t._v(t._s(a.avgSalary))])]),s("div",{staticClass:"detail-row"},[s("span",{staticClass:"detail-label"},[t._v("招聘数量:")]),s("span",{staticClass:"detail-value"},[t._v(t._s(a.count)+"个")])])])]),s("span",{staticClass:"job-count"},[t._v(t._s(a.count)+"个")])])})):s("div",{staticClass:"no-data"},[t._v(" 数据加载中... ")])],2)]),s("div",{staticClass:"industry-city-panel"},[s("div",{staticClass:"panel-item"},[s("div",{staticClass:"panel-title"},[t._v("主要行业分布")]),s("div",{staticClass:"panel-content",attrs:{id:"industry-list-scroll"}},[t.hasData?t._l(t.topIndustries,(function(a,e){return s("div",{key:"ind-"+e,staticClass:"tag-item",style:{borderLeft:"3px solid "+t.getTagColor(e)}},[s("span",{staticClass:"tag-name",attrs:{title:a.name}},[t._v(t._s(a.name))]),s("span",{staticClass:"tag-count"},[t._v(t._s(a.value))])])})):s("div",{staticClass:"no-data"},[t._v(" 数据加载中... ")])],2)]),s("div",{staticClass:"panel-item"},[s("div",{staticClass:"panel-title"},[t._v("热门城市分布")]),s("div",{staticClass:"panel-content",attrs:{id:"city-list-scroll"}},[t.hasData?t._l(t.topCities,(function(a,e){return s("div",{key:"city-"+e,staticClass:"tag-item",style:{borderLeft:"3px solid "+t.getTagColor(e+5)}},[s("span",{staticClass:"tag-name",attrs:{title:a.name}},[t._v(t._s(a.name))]),s("span",{staticClass:"tag-count"},[t._v(t._s(a.value))])])})):s("div",{staticClass:"no-data"},[t._v(" 数据加载中... ")])],2)])])])},l=[],i=(a("6d95"),a("10ab"),{name:"JobProfileDetails",props:{data:{type:Object,default:null}},data(){return{colors:["#2c7bfe","#c2232a","#feed2c","#a262f2","#62d5f2","#fe672c","#69f262","#2ca8fe","#fc54a6","#7e57c2"],scrollIntervals:{},activeJobIndex:-1,statKey:0}},computed:{hasData(){return this.data&&this.data.profiles&&this.data.profiles.length>0},profiles(){var t;return(null===(t=this.data)||void 0===t?void 0:t.profiles)||[]},totalJobsDisplay(){var t;const s=(null===(t=this.data)||void 0===t?void 0:t.totalJobs)||0;return console.log("总职位数显示值:",s),s},avgSalaryDisplay(){var t;const s=(null===(t=this.data)||void 0===t?void 0:t.avgSalary)||"0K";return console.log("平均薪资显示值:",s),s},topIndustries(){var t;return(null===(t=this.data)||void 0===t?void 0:t.topIndustries)||[]},topCities(){var t;return(null===(t=this.data)||void 0===t?void 0:t.topCities)||[]}},watch:{data:{handler(t){console.log("JobProfileDetails 接收到数据:",t),t&&(console.log("总职位数:",t.totalJobs),console.log("平均薪资:",t.avgSalary),this.statKey++,this.$nextTick(()=>{this.setupScrolling(),this.animateStats()}))},deep:!0,immediate:!0}},methods:{setChart(){this.setupScrolling(),this.hasData&&this.animateStats()},setupScrolling(){Object.values(this.scrollIntervals).forEach(t=>clearInterval(t)),this.scrollIntervals={},this.hasData&&(this.scrollIntervals.jobs=this.scrollElement("job-list-scroll",30),this.scrollIntervals.industries=this.scrollElement("industry-list-scroll",40),this.scrollIntervals.cities=this.scrollElement("city-list-scroll",40))},scrollElement(t,s){const a=document.getElementById(t);if(a&&a.scrollHeight>a.clientHeight){let t=0,e=1,l=!1;const i=setInterval(()=>{l||(e>0?(t+=.5,t>=a.scrollHeight-a.clientHeight&&setTimeout(()=>{e=-1},2e3)):(t-=.5,t<=0&&setTimeout(()=>{e=1},2e3)),a.scrollTop=t)},s);return a.addEventListener("mouseenter",()=>{l=!0}),a.addEventListener("mouseleave",()=>{l=!1}),i}return null},animateStats(){const t=this.$el.querySelectorAll(".stat-value");console.log("开始动画，找到的元素:",t.length),t.forEach((t,s)=>{let a=t.textContent;console.log(`元素${s}的值:`,a);let e=!1,l=0,i="";if(a.includes("K")){const t=a.replace("K","");isNaN(parseFloat(t))||(e=!0,l=parseFloat(t),i="K")}else isNaN(parseFloat(a))||(e=!0,l=parseFloat(a),i="");if(console.log(`处理结果 - isNumeric: ${e}, targetValue: ${l}, suffix: ${i}`),"0K"!==a){if(e&&l>0){let e=0,o=1500,n=null;const r=s=>{n||(n=s);let c,d=s-n,v=Math.min(d/o,1),u=1-Math.pow(1-v,3);c="K"===i&&l%1!==0?(e+(l-e)*u).toFixed(1):Math.floor(e+(l-e)*u),t.textContent=c+i,v<1?requestAnimationFrame(r):t.textContent=a};t.textContent="0"+i,setTimeout(()=>{requestAnimationFrame(r)},200*s)}}else console.log("薪资为0K，跳过动画")})},getRankColor(t){return this.colors[t%this.colors.length]},getTagColor(t){return this.colors[t%this.colors.length]}},mounted(){this.setChart()},beforeDestroy(){Object.values(this.scrollIntervals).forEach(t=>{t&&clearInterval(t)})}}),o=i,n=(a("9e4a"),a("1805")),r=Object(n["a"])(o,e,l,!1,null,"ad5ea988",null);s["default"]=r.exports}}]);
//# sourceMappingURL=chunk-2671678e.25cfc9d1.js.map